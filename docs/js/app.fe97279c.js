(function(t){function e(e){for(var r,o,i=e[0],s=e[1],u=e[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);l&&l(e);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(c.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},c=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/BachelorThesisRaceyard/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=s;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0b29":function(t,e,n){var r={"./DemoChooser.vue":"a9cc","./TrackCanvas.vue":"1cff"};function a(t){var e=c(t);return n(e)}function c(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=c,t.exports=a,a.id="0b29"},"1cff":function(t,e,n){"use strict";n.r(e);var r=n("7a23"),a={class:"d-flex"},c={class:"ms-3",style:{flex:"1"}},o={class:"form-group"},i=Object(r["f"])("label",null,"track width",-1),s={class:"d-flex"},u={class:"ms-2"},l={class:"form-group"},d=Object(r["f"])("label",null,"derived width",-1),f={class:"d-flex"},h=["value"],p={class:"ms-2"},b={class:"form-group"},y=Object(r["f"])("label",null,"spacing",-1),v={class:"d-flex"},m={class:"ms-2"},g={class:"form-group"},O=Object(r["f"])("label",null,"derived spacing",-1),j={class:"d-flex"},w=["value"],x={class:"ms-2"},k={class:"d-flex"},M=["value"],D={class:"ms-2"},P={class:"form-group"},_=Object(r["f"])("label",null,"freeze ground truth",-1),F=["disabled"],T=Object(r["g"])(" Calculate Python Midline "),C={key:0},S=Object(r["f"])("hr",null,null,-1),A=Object(r["f"])("a",{id:"downloadAnchorElem",style:{display:"none"}},null,-1),R={class:"form-group"},E={class:"form-group"},L=Object(r["f"])("label",null,"import YAML",-1),J={class:"form-group"},N=Object(r["f"])("label",null,"open JSON",-1),B=Object(r["f"])("hr",null,null,-1),W={key:0,class:"alert alert-danger"},I={class:"form-group"},Y=Object(r["f"])("label",null,"output",-1);function U(t,e,n,U,z,G){var V=Object(r["m"])("DemoChooser");return Object(r["i"])(),Object(r["e"])("div",a,[Object(r["f"])("div",null,[Object(r["f"])("canvas",{ref:"canvas",onMousedown:e[0]||(e[0]=function(){return t.canvasMouseDown&&t.canvasMouseDown.apply(t,arguments)}),onMousemove:e[1]||(e[1]=function(){return t.canvasMouseMove&&t.canvasMouseMove.apply(t,arguments)}),onMouseup:e[2]||(e[2]=function(){return t.documentMouseup&&t.documentMouseup.apply(t,arguments)}),width:"500",height:"500"},null,544)]),Object(r["f"])("div",c,[Object(r["f"])("div",o,[i,Object(r["f"])("div",s,[Object(r["r"])(Object(r["f"])("input",{type:"range",class:"form-range w-0 flex-1",min:"1",max:"100","onUpdate:modelValue":e[3]||(e[3]=function(e){return t.trackWidth=e})},null,512),[[r["p"],t.trackWidth,void 0,{number:!0}]]),Object(r["f"])("output",u,Object(r["n"])(t.trackWidth),1)])]),Object(r["f"])("div",l,[d,Object(r["f"])("div",f,[Object(r["f"])("input",{type:"range",class:"form-range w-0 flex-1",min:"1",max:"100",value:t.derivedWidth/2,disabled:""},null,8,h),Object(r["f"])("output",p,Object(r["n"])(Math.round(t.derivedWidth/2)),1)])]),Object(r["f"])("div",b,[y,Object(r["f"])("div",v,[Object(r["r"])(Object(r["f"])("input",{type:"range",class:"form-range w-0 flex-1",min:"1",max:"100","onUpdate:modelValue":e[4]||(e[4]=function(e){return t.spacing=e})},null,512),[[r["p"],t.spacing,void 0,{number:!0}]]),Object(r["f"])("output",m,Object(r["n"])(t.spacing),1)])]),Object(r["f"])("div",g,[O,Object(r["f"])("div",j,[Object(r["f"])("input",{type:"range",class:"form-range w-0 flex-1 handle-red",min:"1",max:"100",value:t.derivedSpacingRed,disabled:""},null,8,w),Object(r["f"])("output",x,Object(r["n"])(Math.round(t.derivedSpacingRed)),1)]),Object(r["f"])("div",k,[Object(r["f"])("input",{type:"range",class:"form-range w-0 flex-1 handle-blue",min:"1",max:"100",value:t.derivedSpacingBlue,disabled:""},null,8,M),Object(r["f"])("output",D,Object(r["n"])(Math.round(t.derivedSpacingBlue)),1)])]),Object(r["f"])("div",P,[_,Object(r["r"])(Object(r["f"])("input",{type:"checkbox",class:"form-check","onUpdate:modelValue":e[5]||(e[5]=function(e){return t.freezeGroundTruth=e})},null,512),[[r["o"],t.freezeGroundTruth]])]),Object(r["f"])("button",{onClick:e[6]||(e[6]=function(){return t.reset&&t.reset.apply(t,arguments)}),class:"btn btn-danger my-2 me-4"},"Reset"),Object(r["f"])("button",{onClick:e[7]||(e[7]=function(){return t.download&&t.download.apply(t,arguments)}),class:"btn btn-secondary my-2 me-4"},"Download"),Object(r["f"])("button",{onClick:e[8]||(e[8]=function(){return t.addMissingPressed&&t.addMissingPressed.apply(t,arguments)}),class:"btn btn-info my-2 me-4"},"Add missing"),Object(r["f"])("button",{onClick:e[9]||(e[9]=function(){return t.calculatePython&&t.calculatePython.apply(t,arguments)}),class:"btn btn-success my-2",disabled:t.pythonLoading},[T,t.pythonLoading?(Object(r["i"])(),Object(r["e"])("span",C,"(loading...)")):Object(r["d"])("",!0)],8,F),S,A,Object(r["f"])("div",R,[Object(r["h"])(V,{onFileSelected:t.openDemo},null,8,["onFileSelected"])]),Object(r["f"])("div",E,[L,Object(r["f"])("input",{onChange:e[10]||(e[10]=function(){return t.YAMLFilesChange&&t.YAMLFilesChange.apply(t,arguments)}),type:"file",class:"form-control"},null,32)]),Object(r["f"])("div",J,[N,Object(r["f"])("input",{onChange:e[11]||(e[11]=function(){return t.JSONFilesChange&&t.JSONFilesChange.apply(t,arguments)}),type:"file",class:"form-control"},null,32)]),B,t.outputError?(Object(r["i"])(),Object(r["e"])("div",W,Object(r["n"])(t.outputError),1)):Object(r["d"])("",!0),Object(r["f"])("div",I,[Y,Object(r["r"])(Object(r["f"])("textarea",{class:"form-control",rows:"7","onUpdate:modelValue":e[12]||(e[12]=function(e){return t.output=e}),wrap:"off"},null,512),[[r["p"],t.output]])])])])}var z=n("3835"),G=n("2909"),V=n("1da1"),q=n("d4ec"),$=n("bee2"),X=n("262e"),H=n("2caf"),K=(n("96cf"),n("d3b7"),n("cb29"),n("d81d"),n("4de4"),n("99af"),n("ac1f"),n("1276"),n("498a"),n("c1f9"),n("4e82"),n("fb6a"),n("0481"),n("159b"),n("9ab4")),Q=n("ce1f"),Z=n("b8ab"),tt=function(t){Object(X["a"])(n,t);var e=Object(H["a"])(n);function n(){var t;return Object(q["a"])(this,n),t=e.apply(this,arguments),t.spacing=30,t.trackWidth=10,t.drawing=!1,t.lastPos=[0,0],t.startPos=[0,0],t.distance=0,t.nextDotTargetDistance=t.spacing,t.trackData={pylons:[],groundTruth:[]},t.detection={},t.outputError="",t.pyodide=null,t.groundTruthToBeAdded=[],t.freezeGroundTruth=!1,t.derivedWidth=0,t.derivedSpacingRed=0,t.derivedSpacingBlue=0,t.pythonLoading=!0,t}return Object($["a"])(n,[{key:"context",get:function(){return this.canvas.getContext("2d")}},{key:"canvas",get:function(){return this.$refs.canvas}},{key:"mounted",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.pyodide){t.next=4;break}return t.next=3,loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.18.0/full/"});case 3:window.pyodide=t.sent;case 4:return this.pyodide||(this.pyodide=window.pyodide),t.next=7,fetch("./python/main.py");case 7:return t.next=9,t.sent.text();case 9:return e=t.sent,console.warn("BEFORE IMPORT"),t.next=13,this.pyodide.loadPackagesFromImports(e);case 13:console.warn("AFTER IMPORT"),this.pythonLoading=!1;case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"d",value:function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}},{key:"getPos",value:function(t){var e=t.target.getBoundingClientRect(),n=e.x,r=e.y,a=t.clientX-n,c=t.clientY-r;return[a,c]}},{key:"drawCircle",value:function(t,e,n,r){this.trackData.pylons.push({x:Math.round(100*t)/100,y:Math.round(100*e)/100,color:r}),this.drawCircleRaw(t,e,n,r)}},{key:"drawCircleRaw",value:function(t,e,n,r){this.context.beginPath(),this.context.arc(t,e,n,0,2*Math.PI,!1),r&&(this.context.fillStyle=r,this.context.fill())}},{key:"drawArrow",value:function(t,e,n){var r=rt(t,e),a=10,c=r[0]-t[0],o=r[1]-t[1],i=Math.atan2(o,c);this.context.beginPath(),this.context.moveTo(t[0],t[1]),this.context.lineTo(r[0],r[1]),this.context.lineTo(r[0]-a*Math.cos(i-Math.PI/6),r[1]-a*Math.sin(i-Math.PI/6)),this.context.moveTo(r[0],r[1]),this.context.lineTo(r[0]-a*Math.cos(i+Math.PI/6),r[1]-a*Math.sin(i+Math.PI/6)),this.context.strokeStyle=n,this.context.stroke()}},{key:"reset",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.distance=0,this.nextDotTargetDistance=this.spacing,this.trackData.pylons=[],this.trackData.groundTruth=[],this.detection={}}},{key:"canvasMouseDown",value:function(t){this.drawing=!0,this.lastPos=this.getPos(t),this.groundTruthToBeAdded.push(this.lastPos.map((function(t){return Math.round(100*t)/100}))),this.startPos=this.lastPos}},{key:"canvasMouseMove",value:function(t){if(this.drawing){var e=this.getPos(t);this.groundTruthToBeAdded.push(e),this.context.beginPath();var n=this.d(this.lastPos,e);if(this.distance+=n,this.context.moveTo(this.lastPos[0],this.lastPos[1]),this.context.lineTo(e[0],e[1]),this.context.stroke(),this.distance>=this.nextDotTargetDistance){this.nextDotTargetDistance+=this.spacing;var r=this.trackWidth/n;this.drawCircle(e[0]-(this.lastPos[1]-e[1])*r,e[1]+(this.lastPos[0]-e[0])*r,5,"#0000FF"),this.drawCircle(e[0]+(this.lastPos[1]-e[1])*r,e[1]-(this.lastPos[0]-e[0])*r,5,"#FF0000")}this.lastPos=e}}},{key:"documentMouseup",value:function(t){var e=this;this.drawing=!1;var n=this.getPos(t);if(this.groundTruthToBeAdded.push(n),this.d(this.startPos,n)<5&&this.trackData.pylons.length>0){var r=this.trackData.pylons.reduce((function(t,r){return e.d([t.x,t.y],n)<e.d([r.x,r.y],n)?t:r}));r.undetect?(r.undetect=!1,r.hidden=!0,this.drawCircleRaw(r.x,r.y,5,"#DDDDDD")):r.hidden?(r.undetect=!1,r.hidden=!1,r.color="#0000FF",this.drawCircleRaw(r.x,r.y,5,r.color)):"#0000FF"==r.color?(r.color="#FF0000",this.drawCircleRaw(r.x,r.y,5,r.color)):(r.undetect=!0,this.drawCircleRaw(r.x,r.y,5,"#000"))}else{var a;this.freezeGroundTruth||(a=this.trackData.groundTruth).push.apply(a,Object(G["a"])(this.groundTruthToBeAdded)),this.groundTruthToBeAdded=[]}}},{key:"output",get:function(){var t=this.trackData.pylons.filter((function(t){return!t.hidden&&!t.undetect}));return"\n            groundTruth = ".concat(JSON.stringify(this.trackData.groundTruth),"\n            cone_blue = ").concat(JSON.stringify(t.filter((function(t){return"#0000FF"==t.color})).map((function(t){return[t.x,t.y]}))),"\n            cone_yellow = ").concat(JSON.stringify(t.filter((function(t){return"#FF0000"==t.color})).map((function(t){return[t.x,t.y]}))),"\n            faulty_cones = ").concat(JSON.stringify(this.trackData.pylons.filter((function(t){return t.undetect})).map((function(t){return[t.x,t.y]}))),"\n\n            ").concat(this.detection.blueDetected?"cone_blue_detected = ".concat(JSON.stringify(this.detection.blueDetected)):"","\n            ").concat(this.detection.yellowDetected?"cone_yellow_detected = ".concat(JSON.stringify(this.detection.yellowDetected)):"","\n            ").concat(this.detection.midLine?"midLine = ".concat(JSON.stringify(this.detection.midLine)):"","\n        ")},set:function(t){try{var e=t.split("\n").map((function(t){return t.trim()})).filter((function(t){return t})).map((function(t){return t.split("=")})),n=Object.fromEntries(e.map((function(t){var e=Object(z["a"])(t,2),n=e[0],r=e[1];return[n.trim(),JSON.parse(r)]})));n.cone_blue||(n.cone_blue=[]),n.cone_yellow||(n.cone_yellow=[]),n.faulty_cones||(n.faulty_cones=[]),this.trackData.pylons=[].concat(Object(G["a"])(n.cone_blue.map((function(t){var e=Object(z["a"])(t,2),n=e[0],r=e[1];return{x:n,y:r,color:"#0000FF"}}))),Object(G["a"])(n.cone_yellow.map((function(t){var e=Object(z["a"])(t,2),n=e[0],r=e[1];return{x:n,y:r,color:"#FF0000"}}))),Object(G["a"])(n.faulty_cones.map((function(t){var e=Object(z["a"])(t,2),n=e[0],r=e[1];return{x:n,y:r,color:"#000000",undetect:!0}})))),this.trackData.groundTruth=n.groundTruth,this.detection={blueDetected:n.cone_blue_detected,yellowDetected:n.cone_yellow_detected,midLine:n.midLine},this.outputError="",this.redraw()}catch(r){this.outputError=""+r}}},{key:"addMissingPressed",value:function(){var t=this,e=this.trackData.pylons.filter((function(t){return!t.hidden&&!t.undetect})),n=e.filter((function(t){return"#0000FF"==t.color})).map((function(t){return[t.x,t.y]})),r=e.filter((function(t){return"#FF0000"==t.color})).map((function(t){return[t.x,t.y]})),a=(this.trackData.pylons.filter((function(t){return t.undetect})).map((function(t){return[t.x,t.y]})),function(t){return t.map((function(t,e,n){return n[e+1]?nt(t,n[e+1]):0})).slice(0,-1).sort().median()});this.derivedSpacingBlue=a(n),this.derivedSpacingRed=a(r),this.derivedWidth=[].concat(Object(G["a"])(n.map((function(e){return nt(e,t.findClosestPoint(r,e))}))),Object(G["a"])(r.map((function(e){return nt(e,t.findClosestPoint(n,e))})))).sort().median(),this.addMissing(r,n,this.derivedWidth,this.derivedSpacingRed,this.derivedSpacingBlue,"#0000AA",-1),this.addMissing(n,r,this.derivedWidth,this.derivedSpacingBlue,this.derivedSpacingRed,"#AA0000",1)}},{key:"findClosestPoint",value:function(t,e){return t.reduce((function(t,n){return nt([t[0],t[1]],e)<nt([n[0],n[1]],e)?t:n}))}},{key:"addMissing",value:function(t,e,n,r,a,c,o){for(var i=1;i<t.length-1;i++)if(!(nt(t[i],t[i+1])>2*r)&&!(nt(t[i],t[i-1])>2*r)){var s=it(ot(rt(at(t[i],t[i+1]),at(t[i-1],t[i])))),u=rt(t[i],ct(s,n*o));this.drawArrow(t[i],ct(s,n*o),"pink");var l=this.findClosestPoint(e,u);nt(u,l)>.5*a&&this.drawCircleRaw(u[0],u[1],5,c)}}},{key:"download",value:function(){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.trackData)),e=document.getElementById("downloadAnchorElem");e.setAttribute("href",t),e.setAttribute("download","trackCones.json"),e.click()}},{key:"calculatePython",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,c,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.pythonLoading&&null!=this.pyodide){t.next=2;break}return t.abrupt("return");case 2:return this.pythonLoading=!0,t.prev=3,e=this.trackData.pylons.filter((function(t){return!t.hidden&&!t.undetect})),this.pyodide.globals.set("args",{cone_blue:JSON.stringify(e.filter((function(t){return"#0000FF"==t.color})).map((function(t){return[t.x,t.y]}))),cone_yellow:JSON.stringify(e.filter((function(t){return"#FF0000"==t.color})).map((function(t){return[t.x,t.y]}))),faulty_cones:JSON.stringify(this.trackData.pylons.filter((function(t){return t.undetect})).map((function(t){return[t.x,t.y]})))}),t.next=8,this.pyodide.runPythonAsync("print(args)");case 8:return t.next=10,this.pyodide.runPythonAsync("\n            import sys\n            from js import fetch\n            async def fetch_and_decode(url):\n                jsbuf = await (await fetch(url)).arrayBuffer()\n                pybuf = bytearray(jsbuf.to_py())\n                return pybuf\n\n            with open('christofides.py', 'wb') as f:\n                f.write(await fetch_and_decode(\"./python/christofides.py\"))\n            sys.path.insert(0, '.')\n        ");case 10:return console.warn("AFTER CODE1"),t.next=13,fetch("./python/main.py");case 13:return t.next=15,t.sent.text();case 15:return n=t.sent,t.t0=console,t.next=19,this.pyodide.runPythonAsync("__name__='__main__'\n"+n);case 19:t.t1=t.sent,t.t0.log.call(t.t0,t.t1),console.warn("AFTER CODE2"),r=this.pyodide.globals.get("result").toJs(),a=Object(z["a"])(r,3),c=a[0],o=a[1],i=a[2],this.output+="\n            cone_blue_detected = ".concat(JSON.stringify(c),"\n            cone_yellow_detected = ").concat(JSON.stringify(o),"\n            midLine = ").concat(JSON.stringify(i)),t.next=29;break;case 26:t.prev=26,t.t2=t["catch"](3),console.warn(t.t2);case 29:return t.prev=29,this.pythonLoading=!1,t.finish(29);case 32:case"end":return t.stop()}}),t,this,[[3,26,29,32]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"openDemo",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.reset(),t.next=3,fetch(e);case 3:return t.next=5,t.sent.text();case 5:n=t.sent,r=Z["parse"](n),this.loadYAMLFile(r);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"YAMLFilesChange",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.target.files,console.log(n),t.t0=Z,t.next=5,n[0].text();case 5:t.t1=t.sent,r=t.t0.parse.call(t.t0,t.t1),this.loadYAMLFile(r);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadYAMLFile",value:function(t){var e=this,n=t.cones_left,r=t.cones_orange,a=t.cones_orange_big,c=t.cones_right;console.log([n,r,a,c]);var o=[n,r,a,c].map((function(t){return t.map((function(t){return t.split("\n").map((function(t){return parseFloat(t.trim().slice(1))}))}))})),i=o.flat(),s=[i.map((function(t){return t[0]})).min(),i.map((function(t){return t[0]})).max()],u=s[0],l=s[1],d=[i.map((function(t){return t[1]})).min(),i.map((function(t){return t[1]})).max()],f=d[0],h=d[1],p=Math.min(1/(l-u),1/(h-f)),b=[-u,-f],y=o.map((function(t){return t.map((function(t){return ct(rt(t,b),p)}))})).map((function(t){return t.map((function(t){return rt(ct(t,450).map((function(t){return Math.round(100*t)/100})),[25,25])}))}));y.forEach((function(t,n){return t.forEach((function(t){e.drawCircleRaw(t[0],t[1],5,["blue","yellow","orange","red","green"][n])}))})),this.trackData.pylons=[].concat(Object(G["a"])(y[0].map((function(t){var e=Object(z["a"])(t,2),n=e[0],r=e[1];return{x:n,y:r,color:"#0000FF"}}))),Object(G["a"])(y[3].map((function(t){var e=Object(z["a"])(t,2),n=e[0],r=e[1];return{x:n,y:r,color:"#FF0000"}}))))}},{key:"JSONFilesChange",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.target.files,console.log(n),t.t0=JSON,t.next=5,n[0].text();case 5:t.t1=t.sent,r=t.t0.parse.call(t.t0,t.t1),this.reset(),this.trackData=r,this.redraw();case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"redraw",value:function(){var t=this;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.trackData.pylons.forEach((function(e){var n=e.x,r=e.y,a=e.color,c=e.hidden,o=e.undetect;return t.drawCircleRaw(n,r,5,c?"#DDDDDD":o?"#000":a)})),this.strokePolygon(this.detection.blueDetected||[],"#7777FF",3,!0,!0),this.strokePolygon(this.detection.yellowDetected||[],"#FF7777",3,!0,!0),this.strokePolygon(this.detection.midLine||[],"#00FF00",5,!0,!0),this.strokePolygon(this.trackData.groundTruth,"#000000",3,!0,!1)}},{key:"strokePolygon",value:function(t,e,n,r,a){if(!(t.length<=0)){if(this.context.beginPath(),e&&(this.context.strokeStyle=e),r)for(var c=0;c<t.length-1;c++)this.drawArrow(t[c],at(t[c+1],t[c]),e);if(this.context.stroke(),a)for(var o=0;o<t.length;o++)this.drawCircle(t[o][0],t[o][1],n,e)}}}]),n}(Q["b"]);tt=Object(K["a"])([Object(Q["a"])({})],tt);var et=tt;function nt(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function rt(t,e){return[t[0]+e[0],t[1]+e[1]]}function at(t,e){return[t[0]-e[0],t[1]-e[1]]}function ct(t,e){return"number"==typeof e?[t[0]*e,t[1]*e]:[t[0]*e[0],t[1]*e[1]]}function ot(t){return ct(t,1/nt(t,[0,0]))}function it(t){return[t[1],-t[0]]}Array.prototype.median=function(){if(0==this.length)throw new Error("Array.median invoced with empty array");if(this.length%2===0){var t=this[this.length/2-1],e=this[this.length/2-1];if("number"!=typeof t||"number"!=typeof e)throw new Error("median values non numeric in array with even size");return(t+e)/2}return this[(this.length-1)/2]},Array.prototype.mean=function(){for(var t=0,e=0,n=this.length;e<n;e++)t+=this[e];return t/this.length},Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)};n("6287");et.render=U;e["default"]=et},6287:function(t,e,n){"use strict";n("910c")},"74a5":function(t,e,n){"use strict";n("9966")},"910c":function(t,e,n){},9966:function(t,e,n){},a9cc:function(t,e,n){"use strict";n.r(e);n("b0c0");var r=n("7a23"),a={key:0,class:"modal-mask"},c={class:"modal-dialog modal-lg",role:"document"},o={class:"modal-content"},i={class:"modal-header"},s=Object(r["f"])("h5",{class:"modal-title"},"Choose Demo Track",-1),u={class:"modal-body row",style:{"max-height":"80vh",overflow:"auto"}},l=["onClick"],d={class:"card mb-4"},f=["src","onError"],h={class:"card-body"},p={class:"card-text"};function b(t,e,n,b,y,v){return Object(r["i"])(),Object(r["e"])(r["a"],null,[Object(r["h"])(r["b"],{name:"modal"},{default:Object(r["q"])((function(){return[t.showModal?(Object(r["i"])(),Object(r["e"])("div",a,[Object(r["f"])("div",{class:"modal-wrapper",onClick:e[1]||(e[1]=Object(r["s"])((function(e){return t.showModal=!1}),["self"]))},[Object(r["f"])("div",c,[Object(r["f"])("div",o,[Object(r["f"])("div",i,[s,Object(r["f"])("button",{type:"button",class:"btn-close p-3",onClick:e[0]||(e[0]=function(e){return t.showModal=!1})})]),Object(r["f"])("div",u,[(Object(r["i"])(!0),Object(r["e"])(r["a"],null,Object(r["l"])(t.tracks,(function(e){return Object(r["i"])(),Object(r["e"])("div",{class:"col-12 col-md-6 col-lg-4 col-xl-3",key:e,onClick:function(n){return t.select(e.path)}},[Object(r["f"])("div",d,[Object(r["f"])("img",{class:"card-img-top",src:e.img,onError:function(t){return e.img="https://demofree.sirv.com/nope-not-here.jpg"}},null,40,f),Object(r["f"])("div",h,[Object(r["f"])("h6",p,Object(r["n"])(e.name),1)])])],8,l)})),128))])])])])])):Object(r["d"])("",!0)]})),_:1}),Object(r["f"])("button",{onClick:e[2]||(e[2]=function(e){return t.showModal=!0}),class:"btn btn-primary my-2 me-4"},"Open Demo Track...")],64)}var y=n("2909"),v=n("d4ec"),m=n("bee2"),g=n("262e"),O=n("2caf"),j=(n("d81d"),n("99af"),n("cb29"),n("fb6a"),n("9ab4")),w=n("ce1f"),x=function(t){Object(g["a"])(n,t);var e=Object(O["a"])(n);function n(){var t;return Object(v["a"])(this,n),t=e.apply(this,arguments),t.showModal=!1,t.tracks=["acceleration","FSG","skidpad","track_1"].concat(Object(y["a"])(Array(100).fill(0).map((function(t,e){return"random_track_".concat(("00"+e).slice(-3))})))).map((function(t){return{name:t,img:"./YAML/".concat(t,".png"),path:"./YAML/".concat(t,".yaml")}})),t}return Object(m["a"])(n,[{key:"select",value:function(t){this.showModal=!1,this.$emit("fileSelected",t)}}]),n}(w["b"]);x=Object(j["a"])([Object(w["a"])({})],x);var k=x;n("74a5");k.render=b;e["default"]=k},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("159b"),n("d3b7"),n("ddb0"),n("ac1f"),n("5319"),n("1276");var r=n("7a23"),a=Object(r["f"])("nav",{class:"navbar navbar-dark bg-secondary d-flex p-0"},[Object(r["f"])("div",{class:"container px-3 py-2"},[Object(r["f"])("a",{href:"#",class:"navbar-brand align-bottom router-link-active"},"TrackVisualizer")])],-1),c={class:"container d-flex align-items-stretch justify-content-center flex-column"},o={class:"card card-default mt-5"},i=Object(r["f"])("div",{class:"card-header"},"Canvas",-1),s={class:"card-body"};function u(t,e,n,u,l,d){var f=Object(r["m"])("TrackCanvas");return Object(r["i"])(),Object(r["e"])(r["a"],null,[a,Object(r["f"])("div",c,[Object(r["f"])("div",o,[i,Object(r["f"])("div",s,[Object(r["h"])(f)])])])],64)}var l=n("d4ec"),d=n("262e"),f=n("2caf"),h=n("9ab4"),p=n("ce1f"),b=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(l["a"])(this,n),e.apply(this,arguments)}return n}(p["b"]);b=Object(h["a"])([Object(p["a"])({})],b);var y=b;y.render=u;var v=y,m=(n("7b17"),n("ab8b"),n("8103")),g=n.n(m),O=n("bba4"),j=n.n(O),w=Object(r["c"])(v);window.app=w;var x=n("0b29");x.keys().forEach((function(t){var e=x(t),n=g()(j()(t.split("/").pop().replace(/\.\w+$/,"")));w.component(n,e.default||e)})),w.mount("#app")}});
//# sourceMappingURL=app.fe97279c.js.map